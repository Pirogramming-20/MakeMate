{% extends 'base.html' %}
{% load static %}
{% block content %}
<h1>아이디어 투표 수정하기</h1>

<a href="{% url 'group:group_detail' group_id=group.id %}" class="btn">< back</a>
<form method="post">
  {% csrf_token %}
  <h2>1지망 아이디어 선택</h2>
  <select id="idea_vote1" name="idea_vote1" onchange="updateDropdowns()">
    <option value="">선택 취소</option>
    {% for idea in ideas_for_voting %}
    <option value="{{ idea.id }}" {% if idea.id == vote.idea_vote1.id %}selected{% endif %}>{{ idea.title }}</option>
    {% endfor %}
  </select>

  <h2>2지망 아이디어 선택</h2>
  <select id="idea_vote2" name="idea_vote2" onchange="updateDropdowns()">
    <option value="">선택 취소</option>
    {% for idea in ideas_for_voting %}
    <option value="{{ idea.id }}" {% if idea.id == vote.idea_vote2.id %}selected{% endif %}>{{ idea.title }}</option>
    {% endfor %}
  </select>

  <h2>3지망 아이디어 선택</h2>
  <select id="idea_vote3" name="idea_vote3" onchange="updateDropdowns()">
    <option value="">선택 취소</option>
    {% for idea in ideas_for_voting %}
    <option value="{{ idea.id }}" {% if idea.id == vote.idea_vote3.id %}selected{% endif %}>{{ idea.title }}</option>
    {% endfor %}
  </select>

  <!-- 필드 에러 표시 -->
  {% if form.errors %}
  <div class="error">
    {% for field in form %}
      {% if field.errors %}
        {{ field.label }}: {% for error in field.errors %}{{ error }}{% endfor %}
      {% endif %}
    {% endfor %}
  </div>
  {% endif %}

  <div class="vote_modify_btns" style="display: inline-block">
    <button type="submit" class="primary_button" >수정완료</button>
  </div>
</form>

<script src="{% static 'js/group_dropdowns.js' %}"></script>
{% endblock %}



